stream
    |from()
        .database('raw_trade_data')
        .retentionPolicy('autogen')
        .measurement('trades')
        .where(lambda: "symbol" =~ /.*BTC/)
    |window()
        .period(10s)
        .every(10s)
    |sum('volume')
        .as('volume')
    |influxDBOut()
        .create()
        .database('aggregated')
        .retentionPolicy('autogen')
        .measurement('ALL/BTC')
        .precision('s')